(this["webpackJsonpteams-ui"]=this["webpackJsonpteams-ui"]||[]).push([[0],{110:function(e,t,a){e.exports=a(148)},115:function(e,t,a){},116:function(e,t,a){},121:function(e,t,a){},129:function(e,t,a){},130:function(e,t,a){},132:function(e,t,a){},133:function(e,t,a){},134:function(e,t,a){},135:function(e,t,a){},136:function(e,t,a){},137:function(e,t,a){},138:function(e,t,a){},139:function(e,t,a){},141:function(e,t,a){},142:function(e,t,a){},143:function(e,t,a){},144:function(e,t,a){},145:function(e,t,a){},146:function(e,t,a){},147:function(e,t,a){},148:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(13),c=a.n(s),o=(a(115),a(116),a(23)),i=a(24),l=a(31),u=a(30),m=a(82),d=a(16),p=a(32),h=a(60),f=a.n(h);a(117),a(119),a(149);f.a.initializeApp({apiKey:"AIzaSyADjSvD59x-xPFvLQOlfBJQ0HyPrh9O_Hc",authDomain:"ses2b-group2.firebaseapp.com",databaseURL:"https://ses2b-group2.firebaseio.com",storageBucket:"ses2b-group2.appspot.com"});var g=f.a.auth,v=f.a.database(),b=f.a.storage(),E=(a(121),a(92)),k=a.n(E),y=a(3),w=a.n(y),x=a(8);function C(e,t,a){return g().createUserWithEmailAndPassword(e,t).then(Object(x.a)(w.a.mark((function e(){var t;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(t=g().currentUser).sendEmailVerification(),e.next=4,v.ref("users/"+t.uid).set({name:a,email:t.email});case 4:case"end":return e.stop()}}),e)}))))}function S(e,t){return g().signInWithEmailAndPassword(e,t)}function O(){var e=new g.GoogleAuthProvider;return g().signInWithPopup(e).then(Object(x.a)(w.a.mark((function e(){var t;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=g().currentUser,e.next=3,v.ref("users/"+t.uid).update({email:t.email,name:t.displayName});case 3:case"end":return e.stop()}}),e)}))))}function N(){var e=new g.GithubAuthProvider;return g().signInWithPopup(e).then(Object(x.a)(w.a.mark((function e(){var t;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=g().currentUser,e.next=3,v.ref("users/"+t.uid).update({email:t.email,name:t.displayName});case 3:case"end":return e.stop()}}),e)}))))}function j(){return g().signOut()}var I=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(i.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{id:"navbar"},r.a.createElement("div",{className:"nav"},r.a.createElement("img",{src:k.a,alt:"Chat Bubble"}),r.a.createElement("div",null,"Chat App")),r.a.createElement("div",{className:"links"},r.a.createElement("ul",null,r.a.createElement("li",null,r.a.createElement(p.b,{to:"/chat"},"Groups")),this.props.authenticated?"":r.a.createElement("li",null,r.a.createElement(p.b,{to:"/login"},"Login")),this.props.authenticated?r.a.createElement("li",null,r.a.createElement(p.b,{to:"/profile"},"Profile")):"",this.props.authenticated?r.a.createElement("li",null,r.a.createElement(p.b,{to:"/login",onClick:j},"SignOut")):"")))}}]),a}(n.Component),D=a(48),P=a(12),T=a(203),G=a(14),A=a(61),_=(a(129),function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){var e;return Object(o.a)(this,a),(e=t.call(this)).state={error:null,loginError:null,signupError:null,forgotpwError:null,email:"",password:"",newpass:"",username:"",showForgot:!1},e.handleChange=e.handleChange.bind(Object(P.a)(e)),e.handleSignIn=e.handleSignIn.bind(Object(P.a)(e)),e.handleSignUp=e.handleSignUp.bind(Object(P.a)(e)),e.handleForgotPass=e.handleForgotPass.bind(Object(P.a)(e)),e.handleUpdatePass=e.handleUpdatePass.bind(Object(P.a)(e)),e.googleSignIn=e.googleSignIn.bind(Object(P.a)(e)),e.githubSignIn=e.githubSignIn.bind(Object(P.a)(e)),e.onLogin=e.onLogin.bind(Object(P.a)(e)),e.onRegister=e.onRegister.bind(Object(P.a)(e)),e.onForgot=e.onForgot.bind(Object(P.a)(e)),e}return Object(i.a)(a,[{key:"handleChange",value:function(e){this.setState(Object(D.a)({},e.target.name,e.target.value))}},{key:"handleSignIn",value:function(){var e=Object(x.a)(w.a.mark((function e(t){return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),this.setState({loginError:""}),e.prev=2,e.next=5,S(this.state.email,this.state.password);case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(2),this.setState({loginError:e.t0.message});case 10:case"end":return e.stop()}}),e,this,[[2,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"handleUpdatePass",value:function(){var e=Object(x.a)(w.a.mark((function e(t){return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),this.setState({forgotpwError:""}),e.prev=2,e.next=5,S(this.state.email,this.state.password).then(Object(x.a)(w.a.mark((function e(){return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t=this.state.newpass,g().currentuser().updatePassword(t);case 2:case"end":return e.stop()}var t}),e,this)}))));case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(2),this.setState({forgotpwError:e.t0.message});case 10:case"end":return e.stop()}}),e,this,[[2,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"handleForgotPass",value:function(){var e=Object(x.a)(w.a.mark((function e(t){return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),this.setState({forgotpwError:""}),e.prev=2,e.next=5,a=this.state.email,g().sendPasswordResetEmail(a).then((function(){console.log("Email Sent")}));case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(2),this.setState({forgotpwError:e.t0.message});case 10:case"end":return e.stop()}var a}),e,this,[[2,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"handleSignUp",value:function(){var e=Object(x.a)(w.a.mark((function e(t){return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),this.setState({signupError:""}),e.prev=2,e.next=5,C(this.state.email,this.state.password,this.state.username);case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(2),this.setState({signupError:e.t0.message});case 10:case"end":return e.stop()}}),e,this,[[2,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"googleSignIn",value:function(){var e=Object(x.a)(w.a.mark((function e(){return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,O();case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),this.setState({loginError:e.t0.message});case 8:case"end":return e.stop()}}),e,this,[[0,5]])})));return function(){return e.apply(this,arguments)}}()},{key:"githubSignIn",value:function(){var e=Object(x.a)(w.a.mark((function e(){return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,N();case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),this.setState({loginError:e.t0.message});case 8:case"end":return e.stop()}}),e,this,[[0,5]])})));return function(){return e.apply(this,arguments)}}()},{key:"onLogin",value:function(){var e=this;document.getElementById("container").classList.remove("right-panel-active"),setTimeout((function(){e.setState({showForgot:!1})}),500)}},{key:"onRegister",value:function(){document.getElementById("container").classList.add("right-panel-active"),this.setState({showForgot:!1})}},{key:"onForgot",value:function(){document.getElementById("container").classList.add("right-panel-active"),this.setState({showForgot:!0})}},{key:"render",value:function(){return r.a.createElement("div",{id:"login"},r.a.createElement("div",{className:"bg"}),r.a.createElement("div",{id:"container",className:"login-container"},this.state.showForgot?r.a.createElement("div",{className:"form-container sign-up-container forgot"},r.a.createElement("form",{style:{height:"auto"},autoComplete:"off",onSubmit:this.handleForgotPass},r.a.createElement("h1",null,"Forgot Password"),r.a.createElement("div",{className:"input-wrap"},r.a.createElement(T.a,{required:!0,id:"standard-required",label:"Email",name:"email",onChange:this.handleChange,InputProps:{value:this.state.email}}),this.state.forgotpwError?r.a.createElement("p",{className:"text-danger"},this.state.forgotpwError):null,r.a.createElement("button",{type:"submit",style:{padding:0},className:"ghost"},"Reset Password")))):r.a.createElement("div",{className:"form-container sign-up-container"},r.a.createElement("h1",null,"Sign Up"),r.a.createElement("div",{className:"input-wrap"},r.a.createElement("form",{autoComplete:"off",onSubmit:this.handleSignUp},r.a.createElement(T.a,{id:"standard",label:"Username",name:"username",onChange:this.handleChange,InputProps:{value:this.state.username}}),r.a.createElement(T.a,{required:!0,id:"standard-required",label:"Email",name:"email",onChange:this.handleChange,InputProps:{value:this.state.email}}),r.a.createElement(T.a,{required:!0,id:"standard-required",label:"Password",type:"password",name:"password",onChange:this.handleChange,InputProps:{value:this.state.password}}),this.state.signupError?r.a.createElement("p",{className:"text-danger"},this.state.signupError):null,r.a.createElement("button",{type:"submit",className:"ghost"},"Register"))),r.a.createElement("div",{className:"icons"},r.a.createElement(G.a,{icon:A.a,size:"2x",onClick:this.githubSignIn}),r.a.createElement(G.a,{icon:A.b,size:"2x",onClick:this.googleSignIn}))),r.a.createElement("div",{className:"form-container sign-in-container"},r.a.createElement("form",{autoComplete:"off",onSubmit:this.handleSignIn},r.a.createElement("h1",null,"Sign In"),r.a.createElement("div",{className:"input-wrap"},r.a.createElement(T.a,{id:"standard-required",label:"Email",name:"email",onChange:this.handleChange,InputProps:{value:this.state.email}}),r.a.createElement(T.a,{id:"standard-required",label:"Password",type:"password",name:"password",onChange:this.handleChange,InputProps:{value:this.state.password}}),r.a.createElement("span",{style:{display:"block",textAlign:"left"},onClick:this.onForgot},"Forgot Password?"),this.state.loginError?r.a.createElement("p",{className:"text-danger"},this.state.loginError):null,r.a.createElement("button",{type:"submit",className:"ghost"},"Login"),r.a.createElement("div",{className:"icons"},r.a.createElement(G.a,{icon:A.a,size:"2x",onClick:this.githubSignIn}),r.a.createElement(G.a,{icon:A.b,size:"2x",onClick:this.googleSignIn}))))),r.a.createElement("div",{className:"overlay-container"},r.a.createElement("div",{className:"overlay"},r.a.createElement("div",{className:"overlay-panel overlay-left"},r.a.createElement("h1",null,this.state.showForgot?"Remember password?":"Already have an account?"),r.a.createElement("button",{onClick:this.onLogin,className:"ghost"},"Sign In")),r.a.createElement("div",{className:"overlay-panel overlay-right"},r.a.createElement("h1",null,"Don't have an account?"),r.a.createElement("button",{onClick:this.onRegister,className:"ghost"},"Sign Up"))))))}}]),a}(n.Component)),U=a(29);function B(e,t){return M.apply(this,arguments)}function M(){return(M=Object(x.a)(w.a.mark((function e(t,a){var n;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.ref("taskboards/".concat(a)).push({name:"New Taskboard",description:"This is a new taskboard",createdBy:t,createdTimestamp:Date.now()});case 2:return n=e.sent,e.abrupt("return",n.getKey());case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function R(e,t,a){return v.ref("taskboards/".concat(e,"/").concat(t)).update(a)}function z(e,t){return v.ref("columns/".concat(e)).push({name:t,createdTimestamp:Date.now()})}function L(e,t){return v.ref("columns/".concat(e,"/").concat(t)).update({deletedTimestamp:Date.now()})}function F(e,t){return v.ref("tasks/".concat(e,"/").concat(t)).update({deletedTimestamp:Date.now()})}function W(e,t){return v.ref("tasks/".concat(e)).push(t)}function V(e,t,a){return v.ref("tasks/".concat(e,"/").concat(t,"/todos")).push(a)}function q(e,t,a,n){return v.ref("tasks/".concat(e,"/").concat(t,"/todos/").concat(a)).update({isComplete:n})}function H(e,t,a){return v.ref("tasks/".concat(e,"/").concat(t,"/todos/").concat(a)).remove()}function K(e,t,a){return J.apply(this,arguments)}function J(){return(J=Object(x.a)(w.a.mark((function e(t,a,n){var r;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,v.ref("tasks/".concat(a,"/").concat(n)).once("value");case 3:return r=e.sent,e.next=6,v.ref("tasks/".concat(t,"/").concat(n)).update(r.val());case 6:return e.next=8,v.ref("tasks/".concat(a,"/").concat(n)).remove();case 8:e.next=13;break;case 10:throw e.prev=10,e.t0=e.catch(0),e.t0;case 13:case"end":return e.stop()}}),e,null,[[0,10]])})))).apply(this,arguments)}function Q(e,t,a){return v.ref("tasks/".concat(e,"/").concat(t)).update(a)}function Y(e,t){return v.ref("taskComments/".concat(e)).push(t)}function $(e,t){return v.ref("taskComments/".concat(e,"/").concat(t)).remove()}function X(e){return Z.apply(this,arguments)}function Z(){return(Z=Object(x.a)(w.a.mark((function e(t){return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",v.ref("users/".concat(t)).once("value"));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var ee=a(74),te=a(187),ae=a(200),ne=a(197),re=a(6),se=a(19),ce=a(7),oe=a(53),ie=a(194),le=a(195),ue=a(201),me=(a(130),a(196)),de=a(152),pe=a(99),he=a.n(pe),fe=a(190),ge=function(){function e(){Object(o.a)(this,e)}return Object(i.a)(e,null,[{key:"hash",value:function(t,a){var n=Object.assign({msgFormat:"string",outFormat:"hex"},a);switch(n.msgFormat){default:case"string":t=function(e){try{return(new TextEncoder).encode(e,"utf-8").reduce((function(e,t){return e+String.fromCharCode(t)}),"")}catch(E){return unescape(encodeURIComponent(e))}}(t);break;case"hex-bytes":t=function(e){var t=e.replace(" ","");return""===t?"":t.match(/.{2}/g).map((function(e){return String.fromCharCode(parseInt(e,16))})).join("")}(t)}for(var r=[1518500249,1859775393,2400959708,3395469782],s=[1732584193,4023233417,2562383102,271733878,3285377520],c=(t+=String.fromCharCode(128)).length/4+2,o=Math.ceil(c/16),i=new Array(o),l=0;l<o;l++){i[l]=new Array(16);for(var u=0;u<16;u++)i[l][u]=t.charCodeAt(64*l+4*u+0)<<24|t.charCodeAt(64*l+4*u+1)<<16|t.charCodeAt(64*l+4*u+2)<<8|t.charCodeAt(64*l+4*u+3)<<0}i[o-1][14]=8*(t.length-1)/Math.pow(2,32),i[o-1][14]=Math.floor(i[o-1][14]),i[o-1][15]=8*(t.length-1)&4294967295;for(var m=0;m<o;m++){for(var d=new Array(80),p=0;p<16;p++)d[p]=i[m][p];for(var h=16;h<80;h++)d[h]=e.ROTL(d[h-3]^d[h-8]^d[h-14]^d[h-16],1);for(var f=s[0],g=s[1],v=s[2],b=s[3],E=s[4],k=0;k<80;k++){var y=Math.floor(k/20),w=e.ROTL(f,5)+e.f(y,g,v,b)+E+r[y]+d[k]>>>0;E=b,b=v,v=e.ROTL(g,30)>>>0,g=f,f=w}s[0]=s[0]+f>>>0,s[1]=s[1]+g>>>0,s[2]=s[2]+v>>>0,s[3]=s[3]+b>>>0,s[4]=s[4]+E>>>0}for(var x=0;x<s.length;x++)s[x]=("00000000"+s[x].toString(16)).slice(-8);var C="hex-w"===n.outFormat?" ":"";return s.join(C)}},{key:"f",value:function(e,t,a,n){switch(e){case 0:return t&a^~t&n;case 1:return t^a^n;case 2:return t&a^t&n^a&n;case 3:return t^a^n}}},{key:"ROTL",value:function(e,t){return e<<t|e>>>32-t}}]),e}(),ve=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=Object(n.useState)(e),a=Object(ce.a)(t,2),r=a[0],s=a[1];return{inputValue:r,changeInput:function(e){return s(e.target.value)},clearInput:function(){return s("")},keyInput:function(e,t){return(13===e.which||13===e.keyCode)&&(t(r),!0)}}},be=function(e){var t=e.participants;return{addParticipants:function(a,n){""!==a&&e.setParticipants(t.concat({text:a,checked:!1,registered:n.userExists,uid:n.userID}))},addMembers:function(a,n){""!==a&&e.setParticipants(t.concat({text:a,checked:!1,isMember:n.userExists,uid:n.userID}))},checkParticipants:function(a){e.setParticipants(t.map((function(e,t){return a===t&&(e.checked=!e.checked),e})))},removeParticipants:function(a){e.setParticipants(t.filter((function(e,t){return a!==t})))}}},Ee=a(150),ke=a(189),ye=a(96),we=a.n(ye),xe=Object(n.memo)((function(e){return r.a.createElement(Ee.a,{style:{margin:0,padding:10}},r.a.createElement(ke.a,{container:!0},r.a.createElement(ke.a,{xs:10,md:10,item:!0,style:{paddingRight:16}},r.a.createElement(T.a,{placeholder:"Add Participants Here",value:e.inputValue,onChange:e.onInputChange,onKeyPress:e.onInputKeyPress,fullWidth:!0})),r.a.createElement(ke.a,{xs:2,md:1,item:!0},r.a.createElement(fe.a,{fullWidth:!0,variant:"outlined",onClick:e.onButtonClick},r.a.createElement(we.a,null)))))})),Ce=a(188),Se=a(97),Oe=a.n(Se),Ne=a(191),je=a(151),Ie=a(202),De=a(193),Pe=a(192),Te=a(98),Ge=a.n(Te),Ae=Object(n.memo)((function(e){var t=e.source;return"createSubGroup"===t?r.a.createElement(Ne.a,{primary:e.registered?"User Found":"User Not Found",style:e.registered?{color:"green"}:{color:"red"}}):"createGroup"===t?r.a.createElement(Ne.a,{primary:e.registered?"Registered":"Not Registered",style:e.registered?{color:"green"}:{color:"red"}}):void 0})),_e=Object(n.memo)((function(e){var t;return t=e.text.length>10?"".concat(e.text.substring(0,10),"..."):e.text,r.a.createElement(je.a,{divider:e.divider,style:{margin:-12}},r.a.createElement(Ie.a,{onClick:e.onCheckBoxToggle,checked:e.checked,style:{color:"#05728f"}}),r.a.createElement(Oe.a,{style:{color:"#05728f",paddingRight:5}}),r.a.createElement(Ne.a,{primary:t}),r.a.createElement(Ae,{registered:e.registered,style:e.registered,source:e.source}),r.a.createElement(De.a,null,r.a.createElement(Pe.a,{"aria-label":"Delete Participant",onClick:e.onButtonClick},r.a.createElement(Ge.a,null))))})),Ue=Object(n.memo)((function(e){return r.a.createElement("div",null,e.items.length>0&&r.a.createElement(Ee.a,{style:{margin:10}},r.a.createElement(Ce.a,{style:{overflow:"visible"}},e.items.map((function(t,a){return r.a.createElement(_e,Object.assign({},t,{key:"ParticipantItem.".concat(a),divider:a!==e.items.length-1,onButtonClick:function(){return e.onItemRemove(a)},onCheckBoxToggle:function(){return e.onItemCheck(a)},source:e.source}))})))))})),Be=Object(n.memo)((function(e){var t=ve(),a=t.inputValue,n=t.changeInput,s=t.clearInput,c=t.keyInput,o=be(e),i=o.addParticipants,l=o.checkParticipants,u=o.removeParticipants,m=function(){s(),i(a,function(){var t,n=!1,r=null,s=Object(oe.a)(e.users);try{for(s.s();!(t=s.n()).done;){var c=Object(ce.a)(t.value,2),o=c[0],i=c[1];i.email!==a&&i.name!==a||(n=!0,r=o)}}catch(l){s.e(l)}finally{s.f()}return{userExists:n,userID:r}}())};return r.a.createElement("div",null,r.a.createElement(xe,{inputValue:a,onInputChange:n,onButtonClick:m,onInputKeyPress:function(e){return c(e,m)}}),r.a.createElement(Ue,{items:e.participants,onItemCheck:function(e){return l(e)},onItemRemove:function(e){return u(e)},source:"createGroup"}))})),Me=Object(n.memo)((function(e){var t=ve(),a=t.inputValue,n=t.changeInput,s=t.clearInput,c=t.keyInput,o=be(e),i=o.addParticipants,l=o.checkParticipants,u=o.removeParticipants,m=function(t){s(),i(a,function(){var t,n=!1,r=null,s=Object(oe.a)(e.users);try{for(s.s();!(t=s.n()).done;){var c=Object(ce.a)(t.value,2),o=c[0],i=c[1];i.email!==a&&i.name!==a||(n=!0,r=o)}}catch(l){s.e(l)}finally{s.f()}return{userExists:n,userID:r}}())};return r.a.createElement("div",null,r.a.createElement(xe,{inputValue:a,onInputChange:n,onButtonClick:m,onInputKeyPress:function(e){return c(e,m)}}),r.a.createElement(Ue,{items:e.participants,onItemCheck:function(e){return l(e)},onItemRemove:function(e){return u(e)},source:"createGroup"}))})),Re=Object(ie.a)((function(e){return{modal:{display:"flex",alignItems:"center",justifyContent:"center"},paper:{position:"absolute",width:"35%",minWidth:"620px",height:"auto",backgroundColor:e.palette.background.paper,padding:"0px, 0px 0px 0px",borderRadius:"10px",boxShadow:"0 14px 28px rgba(0, 0, 0, 0.25), 0 10px 10px rgba(0, 0, 0, 0.22)",overflow:"auto",maxHeight:"100%"}}}));function ze(e){var t=Re(),a=r.a.useState(!1),s=Object(ce.a)(a,2),c=s[0],o=s[1],i=Object(n.useState)(!1),l=Object(ce.a)(i,2),u=l[0],m=l[1],d=Object(n.useState)(null),p=Object(ce.a)(d,2),h=p[0],f=p[1],g=Object(n.useState)(""),b=Object(ce.a)(g,2),E=b[0],k=b[1],y=Object(n.useState)(""),w=Object(ce.a)(y,2),x=w[0],C=w[1],S=Object(n.useState)([]),O=Object(ce.a)(S,2),N=O[0],j=O[1],I=Object(n.useState)([]),D=Object(ce.a)(I,2),P=D[0],G=D[1],A=Object(n.useState)(new Map),_=Object(ce.a)(A,2),U=_[0],B=_[1];Object(n.useEffect)((function(){try{v.ref("groups").on("value",(function(e){var t=new Map;e.forEach((function(e){t.set(e.key,e.val())})),B(t)}))}catch(e){f(e.message)}return function(){v.ref("groups").off("value")}}),[]);var M=function(){o(!1),k(null),C(null),j([]),G([])};return r.a.createElement("div",null,r.a.createElement("div",{className:"fab"},r.a.createElement(le.a,{color:"primary","aria-label":"add",onClick:function(){o(!0)}},r.a.createElement(he.a,null))),r.a.createElement(ue.a,{"aria-labelledby":"transition-modal-title","aria-describedby":"transition-modal-description",className:t.modal,open:c,onClose:M,closeAfterTransition:!0,BackdropComponent:me.a,BackdropProps:{timeout:500}},r.a.createElement(de.a,{in:c},r.a.createElement("form",{className:t.paper},r.a.createElement("div",{className:"new_group_header",style:{background:"#05728f"}},r.a.createElement("h2",{style:{color:"#fff",borderBottom:"1px solid #05728f",padding:"1em 3.1em 1em 3.1em"}}," ","Create Group")),r.a.createElement("div",{className:"new_group_details",style:{padding:"0px 100px 0px 100px"}},r.a.createElement("h6",{style:{color:"#05728f",marginTop:"50px"}}," ","Group Name"," "),r.a.createElement(T.a,{className:"group_name",inputProps:{style:{fontSize:20}},onChange:function(e){k(e.target.value)},style:{size:"small"}}," "),r.a.createElement("h6",{style:{color:"#05728f",marginTop:"40px"}}," ","Group Description"," "),r.a.createElement(T.a,{className:"group_description",fullWidth:!0,inputProps:{style:{fontSize:16}},onChange:function(e){C(e.target.value)},style:{marginBottom:"55px",size:"small"}}," ")),r.a.createElement("div",{className:"add_group_leaders",style:{padding:"0px 100px 0px 100px"}},r.a.createElement("h6",{style:{color:"#05728f"}}," Assign Group Leader(s) "),r.a.createElement(Me,{participants:P,setParticipants:G,users:e.users})),r.a.createElement("div",{className:"add_group_participant",style:{padding:"0px 100px 0px 100px",marginTop:"55px"}},r.a.createElement("h6",{style:{color:"#05728f"}}," Invite People "),r.a.createElement(Be,{participants:N,setParticipants:j,users:e.users})),u?r.a.createElement("div",{className:"spinner-border text-success",role:"status",style:{display:"flex",marginLeft:"auto",marginRight:"auto",marginTop:"1em",marginBottom:"1em"}},r.a.createElement("span",{className:"sr-only",style:{}},"Saving...")):"",null!==h&&"null"!==h?r.a.createElement("div",{className:"",style:{textAlign:"center",marginTop:"2em",color:"red"}},h):"",r.a.createElement("div",{className:"create_new_group_button",style:{display:"flex",padding:"0px 95px 0px 95px",flexDirection:"row",alignItems:"center",marginBottom:"3em",marginTop:"2.5em"}},r.a.createElement(fe.a,{variant:"outlined",color:"inherit",onClick:function(t){m(!0),f(null);try{var a=ge.hash(E);if(U.has(a))m(!1),f("Group exists");else{v.ref("groups/"+a).update({name:E,description:x,id:a});for(var n=0;n<N.length;++n)if(!0===N[n].registered&&!0===N[n].checked){var r=e.users.get(N[n].uid).name;void 0===e.users.get(N[n].uid).name&&(r=e.users.get(N[n].uid).email),v.ref("groups/".concat(a,"/members/").concat(N[n].uid)).update({displayName:r,groupAccess:"member"}),v.ref("users/".concat(N[n].uid,"/groups/").concat(a)).update({displayName:r,groupAccess:"member"})}for(var s=0;s<P.length;++s)if(!0===P[s].registered&&!0===P[s].checked){var c=e.users.get(P[s].uid).name;void 0===e.users.get(P[s].uid).name&&(c=e.users.get(P[s].uid).email),v.ref("groups/".concat(a,"/members/").concat(P[s].uid)).update({displayName:c,groupAccess:"leader"}),v.ref("users/".concat(P[s].uid,"/groups/").concat(a)).update({displayName:c,groupAccess:"leader"})}e.refreshGroups(),m(!1),o(!1),j([]),G([])}}catch(i){f(i)}},style:{backgroundColor:"#05728f",color:"#fff",fontWeight:"bold",height:"45px",width:"10em",border:"2px solid",borderRadius:20,borderColor:"#05728f",marginLeft:"auto",marginRight:"auto",justifyContent:"center"}},"Save"),r.a.createElement(fe.a,{autoFocus:!0,onClick:M,variant:"outlined",color:"inherit",style:{color:"#05728f",fontWeight:"bold",height:"45px",width:"10em",border:"2px solid",borderRadius:20,marginLeft:"auto",marginRight:"auto",justifyContent:"center"}},"Cancel"))))))}a(132);var Le=Object(n.memo)((function(e){var t=ve(),a=t.inputValue,n=t.changeInput,s=t.clearInput,c=t.keyInput,o=be(e),i=o.addParticipants,l=o.checkParticipants,u=o.removeParticipants,m=function(){s(),i(a,function(){var t,n=!1,r=null,s=Object(oe.a)(e.groupMembers);try{for(s.s();!(t=s.n()).done;){var c=Object(ce.a)(t.value,2),o=c[0];c[1].displayName!==a&&e.users.get(o).email!==a||(n=!0,r=o)}}catch(i){s.e(i)}finally{s.f()}return{userExists:n,userID:r}}())};return r.a.createElement("div",null,r.a.createElement(xe,{inputValue:a,onInputChange:n,onButtonClick:m,onInputKeyPress:function(e){return c(e,m)}}),r.a.createElement(Ue,{items:e.participants,onItemCheck:function(e){return l(e)},onItemRemove:function(e){return u(e)},source:"createSubGroup"}))})),Fe=Object(n.memo)((function(e){var t=ve(),a=t.inputValue,n=t.changeInput,s=t.clearInput,c=t.keyInput,o=be(e),i=o.addParticipants,l=o.checkParticipants,u=o.removeParticipants,m=function(){s(),i(a,function(){var t,n=!1,r=null,s=Object(oe.a)(e.groupMembers);try{for(s.s();!(t=s.n()).done;){var c=Object(ce.a)(t.value,2),o=c[0];c[1].displayName!==a&&e.users.get(o).email!==a||(n=!0,r=o)}}catch(i){s.e(i)}finally{s.f()}return{userExists:n,userID:r}}())};return r.a.createElement("div",null,r.a.createElement(xe,{inputValue:a,onInputChange:n,onButtonClick:m,onInputKeyPress:function(e){return c(e,m)}}),r.a.createElement(Ue,{items:e.participants,onItemCheck:function(e){return l(e)},onItemRemove:function(e){return u(e)},source:"createSubGroup"}))})),We=Object(ie.a)((function(e){return{modal:{display:"flex",alignItems:"center",justifyContent:"center"},paper:{position:"absolute",width:"35%",minWidth:"620px",height:"auto",backgroundColor:e.palette.background.paper,padding:"0px, 0px 0px 0px",borderRadius:"10px",boxShadow:"0 14px 28px rgba(0, 0, 0, 0.25), 0 10px 10px rgba(0, 0, 0, 0.22)",overflow:"auto",maxHeight:"100%"}}}));function Ve(e){var t=We(),a=r.a.useState(!1),s=Object(ce.a)(a,2),c=s[0],o=s[1],i=Object(n.useState)(!1),l=Object(ce.a)(i,2),u=l[0],m=l[1],d=Object(n.useState)(null),p=Object(ce.a)(d,2),h=p[0],f=p[1],g=Object(n.useState)(""),b=Object(ce.a)(g,2),E=b[0],k=b[1],y=Object(n.useState)(""),w=Object(ce.a)(y,2),x=w[0],C=w[1],S=Object(n.useState)([]),O=Object(ce.a)(S,2),N=O[0],j=O[1],I=Object(n.useState)([]),D=Object(ce.a)(I,2),P=D[0],G=D[1],A=Object(n.useState)(new Map),_=Object(ce.a)(A,2),U=_[0],B=_[1],M=Object(n.useState)(new Map),R=Object(ce.a)(M,2),z=R[0],L=R[1];Object(n.useEffect)((function(){try{v.ref("groups/".concat(e.selectedGroupID,"/subGroups")).on("value",(function(e){var t=new Map;e.forEach((function(e){t.set(e.key,e.val())})),B(t)}))}catch(t){f(t.message)}try{v.ref("groups/".concat(e.selectedGroupID,"/members")).on("value",(function(e){var t=new Map;e.forEach((function(e){t.set(e.key,e.val())})),L(t)}))}catch(t){f(t.message)}return function(){v.ref("subGroups").off("value"),v.ref("members").off("value")}}),[e.selectedGroupID]);var F=function(){o(!1),k(null),C(null),j([]),G([])};return r.a.createElement("div",{id:"create-subgroup-form"},r.a.createElement("div",{className:"addSubGroup"},r.a.createElement("button",{type:"button",onClick:function(){o(!0)},className:"primary-button"},r.a.createElement(ee.a,null,"Create new subgroup"))),r.a.createElement(ue.a,{"aria-labelledby":"transition-modal-title","aria-describedby":"transition-modal-description",className:t.modal,open:c,onClose:F,closeAfterTransition:!0,BackdropComponent:me.a,BackdropProps:{timeout:500}},r.a.createElement(de.a,{in:c},r.a.createElement("form",{className:t.paper},r.a.createElement("div",{className:"new_group_header",style:{background:"#05728f"}},r.a.createElement("h2",{style:{color:"#fff",borderBottom:"1px solid #05728f",padding:"1em 3.1em 0em 3.1em"}}," ","Create Subgroup"),r.a.createElement("h6",{style:{color:"#fff",borderBottom:"1px solid #05728f",padding:"0em 6.3em 1em 6.3em"}}," ",e.selecteGroupName)),r.a.createElement("div",{className:"new_group_details",style:{padding:"0px 100px 0px 100px"}},r.a.createElement("h6",{style:{color:"#05728f",marginTop:"50px"}}," ","Subgroup Name"," "),r.a.createElement(T.a,{className:"group_name",id:"outlined-basic",inputProps:{style:{fontSize:20}},onChange:function(e){k(e.target.value)},style:{size:"small"}}," "),r.a.createElement("h6",{style:{color:"#05728f",marginTop:"40px"}}," ","Subgroup Description"," "),r.a.createElement(T.a,{className:"group_description",fullWidth:!0,inputProps:{style:{fontSize:16}},onChange:function(e){C(e.target.value)},style:{marginBottom:"55px",size:"small"}}," ")),r.a.createElement("div",{className:"add_group_leaders",style:{padding:"0px 100px 0px 100px"}},r.a.createElement("h6",{style:{color:"#05728f"}}," Assign Subgroup Leader(s) "),r.a.createElement(Fe,{participants:P,setParticipants:G,users:e.users,groupMembers:e.groupMembers})),r.a.createElement("div",{className:"add_group_participant",style:{padding:"0px 100px 0px 100px",marginTop:"55px"}},r.a.createElement("h6",{style:{color:"#05728f"}}," Invite People "),r.a.createElement(Le,{participants:N,setParticipants:j,users:e.users,groupMembers:e.groupMembers})),u?r.a.createElement("div",{className:"spinner-border text-success",role:"status",style:{display:"flex",marginLeft:"auto",marginRight:"auto",marginTop:"1em",marginBottom:"1em"}},r.a.createElement("span",{className:"sr-only",style:{}},"Saving...")):"",null!==h&&"null"!==h?r.a.createElement("div",{className:"",style:{textAlign:"center",marginTop:"2em",color:"red"}},h):"",r.a.createElement("div",{className:"create_new_subgroup_button",style:{display:"flex",padding:"0px 95px 0px 95px",flexDirection:"row",alignItems:"center",marginBottom:"3em",marginTop:"2.5em"}},r.a.createElement(fe.a,{variant:"outlined",onClick:function(t){m(!0),f(null);try{var a=e.selectedGroupID,n=ge.hash(E);if(U.has(n))m(!1),f("Subgroup exists");else if(function(){for(var e=!0,t=0;t<N.length;t++)z.has(N[t].uid)||(e=!1);return e}()){v.ref("groups/".concat(a,"/subGroups/")+n).update({name:E,description:x,id:n});for(var r=0;r<N.length;++r)if(!0===N[r].registered&&!0===N[r].checked){var s=e.users.get(N[r].uid).name;void 0===e.users.get(N[r].uid).name&&(s=e.users.get(N[r].uid).email),v.ref("groups/".concat(a,"/subGroups/").concat(n,"/members/").concat(N[r].uid)).update({displayName:s,groupAccess:"member"}),v.ref("users/".concat(N[r].uid,"/groups/").concat(a,"/subGroups/").concat(n)).update({displayName:s,groupAccess:"member"})}for(var c=0;c<P.length;++c)if(!0===P[c].registered&&!0===P[c].checked){var i=e.users.get(P[c].uid).name;void 0===e.users.get(P[c].uid).name&&(i=e.users.get(P[c].uid).email),v.ref("groups/".concat(a,"/subGroups/").concat(n,"/members/").concat(P[c].uid)).update({displayName:i,groupAccess:"leader"}),v.ref("users/".concat(P[c].uid,"/groups/").concat(a,"/subGroups/").concat(n)).update({displayName:i,groupAccess:"leader"})}m(!1),o(!1),j([]),G([])}else m(!1),f("User(s) is not part of "+e.selecteGroupName)}catch(l){f(l)}},color:"inherit",style:{backgroundColor:"#05728f",color:"#fff",fontWeight:"bold",height:"45px",width:"10em",marginLeft:"auto",marginRight:"auto",border:"2px solid",borderRadius:20,borderColor:"#05728f",justifyContent:"center"}},"Create"),r.a.createElement(fe.a,{autoFocus:!0,onClick:F,variant:"outlined",color:"inherit",fullWidth:!0,style:{color:"#05728f",fontWeight:"bold",height:"45px",width:"10em",marginLeft:"auto",marginRight:"auto",border:"2px solid",borderRadius:20,justifyContent:"center"}},"Cancel"))))))}a(133);var qe=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).handleSelectGroup=function(e){e.target.id?(n.setState({selectedGroupID:e.target.id,selectedGroupName:n.state.groups.get(e.target.id).name}),v.ref("groups/".concat(e.target.id,"/chats")).once("value",(function(e){var t=[];e.forEach((function(e){t.push(e.val())})),t.sort((function(e,t){return e.timestamp-t.timestamp})),n.setState({chats:t})}))):(n.setState({selectedGroupID:e.currentTarget.id,selectedGroupName:n.state.groups.get(e.currentTarget.id).name}),v.ref("groups/".concat(e.currentTarget.id,"/chats")).once("value",(function(e){var t=[];e.forEach((function(e){t.push(e.val())})),t.sort((function(e,t){return e.timestamp-t.timestamp})),n.setState({chats:t})})))},n.handleCreateTaskboard=Object(x.a)(w.a.mark((function e(){var t;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.state.user.uid&&n.state.selectedGroupID){e.next=3;break}return console.log("UserID or Group ID is empty"),e.abrupt("return");case 3:return e.prev=3,e.next=6,B(n.state.user.uid,n.state.selectedGroupID);case 6:t=e.sent,localStorage.setItem("groupId",n.state.selectedGroupID),n.props.history.push("/taskboard?id=".concat(t)),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(3),console.error("An error occurred when creating a new taskboard",e.t0);case 14:case"end":return e.stop()}}),e,null,[[3,11]])}))),n.state={user:g().currentUser,chats:[],usrGroups:new Map,boards:[],groupMembers:new Map,groups:new Map,selectedGroupID:"",selectedGroupName:"",users:new Map,content:"",readError:null,writeError:null,loadingChats:!1},n.handleChange=n.handleChange.bind(Object(P.a)(n)),n.handleSubmit=n.handleSubmit.bind(Object(P.a)(n)),n.refreshGroups=n.refreshGroups.bind(Object(P.a)(n)),n}return Object(i.a)(a,[{key:"componentDidMount",value:function(){var e=Object(x.a)(w.a.mark((function e(){var t,a,n=this;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=document.querySelector(".msg-mid"),this.setState({readError:null,loadingChats:!0});try{v.ref("users").on("value",(function(e){var t=new Map;e.forEach((function(e){t.set(e.key,e.val())})),n.setState({users:t})}))}catch(r){this.setState({readError:r.message})}a=new Map;try{v.ref("users/".concat(this.state.user.uid,"/groups")).on("value",(function(e){e.forEach((function(e){a.set(e.key,e.val())})),n.setState({usrGroups:a})}))}catch(r){this.setState({readError:r.message})}try{v.ref("groups").on("value",(function(e){var a=new Map;e.forEach((function(e){n.state.usrGroups.has(e.key)&&a.set(e.key,e.val())})),n.setState({groups:a}),n.state.selectedGroupID||n.setState({selectedGroupID:n.state.groups.keys().next().value}),v.ref("groups/".concat(n.state.selectedGroupID,"/chats")).once("value",(function(e){var t=[];e.forEach((function(e){t.push(e.val())})),t.sort((function(e,t){return e.timestamp-t.timestamp})),n.setState({chats:t})})),n.setState({loadingChats:!1}),t.scrollTop=t.scrollHeight}))}catch(r){this.setState({readError:r.message})}case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentDidUpdate",value:function(e,t){var a=this;if(this.state.selectedGroupID&&this.state.selectedGroupID!==t.selectedGroupID){v.ref("taskboards/".concat(t.selectedGroupID)).off("value");try{v.ref("taskboards/".concat(this.state.selectedGroupID)).on("value",(function(e){var t=[];e.forEach((function(e){var a=e.val();t.push(Object(U.a)({id:e.key},a))})),a.setState({boards:t})}))}catch(n){this.setState({readError:n.message})}v.ref("groups/".concat(t.selectedGroupID,"/members")).off("value");try{v.ref("groups/".concat(this.state.selectedGroupID,"/members")).on("value",(function(e){var t=new Map;e.forEach((function(e){t.set(e.key,e.val())})),a.setState({groupMembers:t})}))}catch(n){this.setState({readError:n.message})}}}},{key:"componentWillUnmount",value:function(){var e=Object(x.a)(w.a.mark((function e(){return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:v.ref("users").off("value"),v.ref("chats").off("value"),v.ref("users/".concat(this.state.user.uid,"/groups")).off("value"),v.ref("groups").off("value"),v.ref("members").off("value");case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"refreshGroups",value:function(){var e=this;try{v.ref("groups").once("value",(function(t){var a=new Map;t.forEach((function(t){e.state.usrGroups.has(t.key)&&a.set(t.key,t.val())})),e.setState({groups:a}),e.state.selectedGroupID||e.setState({selectedGroupID:e.state.groups.keys().next().value}),v.ref("groups/".concat(e.state.selectedGroupID,"/chats")).once("value",(function(t){var a=[];t.forEach((function(e){a.push(e.val())})),a.sort((function(e,t){return e.timestamp-t.timestamp})),e.setState({chats:a})})),e.setState({loadingChats:!1})}))}catch(a){this.setState({readError:a.message})}var t=document.querySelector(".msg-mid");t.scrollTop=t.scrollHeight}},{key:"handleChange",value:function(e){this.setState({content:e.target.value})}},{key:"handleSubmit",value:function(){var e=Object(x.a)(w.a.mark((function e(t){var a;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),this.setState({writeError:null}),e.prev=2,e.next=5,v.ref("groups/".concat(this.state.selectedGroupID,"/chats")).push({content:this.state.content,timestamp:Date.now(),uid:this.state.user.uid});case 5:this.setState({content:""}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(2),this.setState({writeError:e.t0.message});case 11:(a=document.querySelector(".msg-mid")).scrollTop=a.scrollHeight;case 13:case"end":return e.stop()}}),e,this,[[2,8]])})));return function(t){return e.apply(this,arguments)}}()},{key:"formatTime",value:function(e){var t=new Date(e);return"".concat(t.getDate(),"/").concat(t.getMonth()+1,"/").concat(t.getFullYear()," ").concat(t.getHours(),":").concat(t.getMinutes())}},{key:"render",value:function(){var e=this,t=this.props.classes;return r.a.createElement("div",{id:"chat",className:""},r.a.createElement("div",{className:"messaging"},r.a.createElement("div",{className:"inbox_msg"},r.a.createElement("div",{className:"inbox_people"},r.a.createElement("div",{className:"headind_srch"},r.a.createElement("div",{className:"recent_heading"},r.a.createElement("h4",null,"Recent")),r.a.createElement("div",{className:"srch_bar"},r.a.createElement("div",{className:"stylish-input-group"},r.a.createElement("input",{type:"text",className:"search-bar",placeholder:"Search"}),r.a.createElement("span",{className:"input-group-addon"},r.a.createElement("button",{type:"button"}," ",r.a.createElement(G.a,{icon:se.e,"aria-hidden":"true"})," "))))),r.a.createElement("div",{className:"inbox_chat",style:{overflowY:"auto",paddingBottom:"10%"}},Array.from(this.state.groups.values()).map((function(t,a){return r.a.createElement("div",{key:t.id,id:t.id,className:t.id===e.state.selectedGroupID?"chat_list active_chat":"chat_list",onClick:e.handleSelectGroup},r.a.createElement("div",{className:"chat_people"},r.a.createElement("div",{className:"chat_img"}," ",r.a.createElement("img",{src:"https://ptetutorials.com/images/user-profile.png",alt:"group-no"})," "),r.a.createElement("div",{className:"chat_ib"},r.a.createElement("h5",null,t.name," ",r.a.createElement("span",{className:"chat_date",style:{display:"none"}},"Dec 25")),r.a.createElement("p",null,t.description))))}))),r.a.createElement("div",{className:"create_group_fab"},r.a.createElement(ze,{className:"create_group_fab",users:this.state.users,groups:this.state.groups,refreshGroups:this.refreshGroups}))),r.a.createElement("div",{className:"mesgs"},r.a.createElement("div",{className:"msg_history"},r.a.createElement("div",{className:"msg-top"},r.a.createElement("div",{className:"group_header"},r.a.createElement("strong",{className:"text-info"},this.state.selectedGroupName||"Group Name")),r.a.createElement("div",{className:"taskboard_menu"},r.a.createElement("div",{className:"create_taskboard_btn"},r.a.createElement("button",{type:"button",onClick:this.handleCreateTaskboard},r.a.createElement(ee.a,null,"Create new taskboard"))),r.a.createElement("div",null,r.a.createElement(te.a,{className:t.list},r.a.createElement(ae.a,{labelId:"demo-simple-select-label",id:"demo-simple-select",value:"",displayEmpty:!0},r.a.createElement(ne.a,{value:"",disabled:!0},"Select a taskboard"),this.state.boards.map((function(t){return r.a.createElement(ne.a,{key:t.id,value:t.id},r.a.createElement(p.b,{to:"/taskboard?id=".concat(t.id),onClick:function(){return localStorage.setItem("groupId",e.state.selectedGroupID)}},t.name))})))))),r.a.createElement("div",{className:"subgroup_menu"},r.a.createElement("div",{className:"create_subgroup_btn"},r.a.createElement(Ve,{className:"addSubGroup",users:this.state.users,groups:this.state.groups,selectedGroupID:this.state.selectedGroupID,selecteGroupName:this.state.selectedGroupName,groupMembers:this.state.groupMembers})),r.a.createElement("div",null,r.a.createElement(te.a,{className:t.list},r.a.createElement(ae.a,{labelId:"demo-simple-select-label",id:"demo-simple-select",value:"",displayEmpty:!0},r.a.createElement(ne.a,{value:"",disabled:!0},"Select a subgroup")))))),this.state.loadingChats?r.a.createElement("div",{className:"spinner-border text-success",role:"status",style:{display:"flex",marginLeft:"auto",marginRight:"auto",marginTop:"1em",marginBottom:"1em"}},r.a.createElement("span",{className:"sr-only",style:{}},"Loading...")):r.a.createElement("div",{className:"msg-mid"},this.state.chats.map((function(t){return r.a.createElement("div",{key:t.timestamp,className:e.state.user.uid===t.uid?"outgoing_msg":"incoming_msg"},e.state.user.uid===t.uid?"":r.a.createElement("div",{className:"incoming_msg_img"}," ",r.a.createElement("img",{src:e.state.users.get(t.uid).profilePic?e.state.users.get(t.uid).profilePic:"https://ptetutorials.com/images/user-profile.png",alt:"sunil"})," "),e.state.user.uid===t.uid?r.a.createElement("div",{className:"sent_msg"},r.a.createElement("p",null,t.content),r.a.createElement("span",{className:"time_date"},e.formatTime(t.timestamp))):r.a.createElement("div",{className:"received_msg"},r.a.createElement("div",{className:"received_withd_msg"},r.a.createElement("div",{className:"name-header"},e.state.users.has(t.uid)?e.state.users.get(t.uid).name?e.state.users.get(t.uid).name:e.state.users.get(t.uid).email:"Anonymous"),r.a.createElement("p",null,t.content),r.a.createElement("span",{className:"time_date"},e.formatTime(t.timestamp)))))}))),r.a.createElement("form",{onKeyDown:this._handleKeyDown,onSubmit:this.handleSubmit,className:"type_msg"},r.a.createElement("textarea",{type:"text",placeholder:"Type a message",className:"form-control write_msg",name:"content",onChange:this.handleChange,value:this.state.content}),this.state.error?r.a.createElement("p",{className:"text-danger"},this.state.error):null,r.a.createElement("button",{className:"msg_send_btn",type:"submit"},r.a.createElement(G.a,{icon:se.c,"aria-hidden":"true"}))))))))}}]),a}(n.Component),He=Object(d.g)(Object(re.a)((function(e){return{List:{width:"11em",marginLeft:"1em"}}}))(qe)),Ke=(a(134),a(135),a(198)),Je=a(199),Qe=(a(136),a(137),function(e){var t=e.columnId,a=e.taskDetails,n=r.a.useState(""),s=Object(ce.a)(n,2),c=s[0],o=s[1],i=r.a.useState(0===a.description.length),l=Object(ce.a)(i,2),u=l[0],m=l[1],d=function(){var e=Object(x.a)(w.a.mark((function e(){return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a.description!==c){e.next=3;break}return p(),e.abrupt("return");case 3:return e.prev=3,e.next=6,Q(t,a.id,{description:c});case 6:p(),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(3),console.log("an error occured when saving new description",e.t0);case 12:case"end":return e.stop()}}),e,null,[[3,9]])})));return function(){return e.apply(this,arguments)}}(),p=function(){o(""),m(!1)};return r.a.createElement("div",{className:"task-description"},r.a.createElement("div",{className:"title-lockup"},r.a.createElement(ee.a,{variant:"h5",component:"h2"},"Description"),!u&&r.a.createElement(fe.a,{onClick:function(){o(a.description),m(!0)}},"Edit")),u?r.a.createElement("div",{className:"editing-lockup"},r.a.createElement("textarea",{label:"Description",value:c,onChange:function(e){o(e.target.value)},placeholder:"Add a more detailed description",rows:5}),r.a.createElement("div",{className:"button-lockup"},r.a.createElement(fe.a,{onClick:d},"Save"),r.a.createElement(fe.a,{onClick:p},r.a.createElement(G.a,{icon:se.f,size:"2x"})))):r.a.createElement(ee.a,null,a.description||"Add a more detailed description... "))}),Ye=(a(138),a(139),function(e){var t=e.taskId,a=r.a.useState(""),n=Object(ce.a)(a,2),s=n[0],c=n[1],o=function(){var e=Object(x.a)(w.a.mark((function e(){var a;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=g().currentUser.uid,e.prev=1,e.next=4,Y(t,{text:s,createdBy:a,lastUpdatedTimestamp:Date.now()});case 4:c(""),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),console.log("An error occurred when submitting the comment");case 10:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(){return e.apply(this,arguments)}}();return r.a.createElement("div",{className:"new-task-comment-lockup"},r.a.createElement("textarea",{label:"Description",value:s,onChange:function(e){c(e.target.value)},placeholder:"Write a comment...",variant:"outlined",rows:2}),s.length>0&&r.a.createElement(fe.a,{onClick:o},"Save"))}),$e=a(100),Xe=a.n($e),Ze=function(e){e.columnId;var t=e.taskDetails,a=r.a.useState([]),s=Object(ce.a)(a,2),c=s[0],o=s[1],i=r.a.useState({}),l=Object(ce.a)(i,2),u=l[0],m=l[1];Object(n.useEffect)((function(){try{v.ref("taskComments/".concat(t.id)).on("value",function(){var e=Object(x.a)(w.a.mark((function e(t){var a,n;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=[],t.forEach((function(e){var t=e.val();t.deletedTimestamp||a.unshift(Object(U.a)({id:e.key},t))})),n={},e.next=5,Promise.all(a.map(function(){var e=Object(x.a)(w.a.mark((function e(t){var a;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,X(t.createdBy);case 2:a=e.sent,n[t.createdBy]=a.val().name;case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 5:m(n),o(a);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}catch(e){alert("An error occurred when getting comments... ".concat(e.message))}return function(){return v.ref("taskComments/".concat(t.id)).off("value")}}),[t.id]);var d=function(){var e=Object(x.a)(w.a.mark((function e(a){return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,$(t.id,a);case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),console.log("An error occurred when deleting comment",e.t0);case 8:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement("div",{className:"task-activity"},r.a.createElement("div",{className:"title-lockup"},r.a.createElement(ee.a,{variant:"h5",component:"h2"},"Activity:")),r.a.createElement(Ye,{taskId:t.id}),r.a.createElement("ul",null,c.map((function(e){return r.a.createElement("li",{key:e.id},r.a.createElement("div",{key:e.id,className:"comment"},r.a.createElement(ee.a,{className:"comment-username"},u[e.createdBy]),r.a.createElement("p",{className:"comment-timestamp"},Xe.a.utc(parseInt(e.lastUpdatedTimestamp)).fromNow(!0)),r.a.createElement(ee.a,{className:"comment-text"},e.text)),r.a.createElement("div",{className:"button-lockup"},r.a.createElement("p",{onClick:function(){return d(e.id)}},"Delete")))}))))},et=(a(141),function(e){var t=e.columnId,a=e.taskDetails,s=Object(n.useState)(""),c=Object(ce.a)(s,2),o=c[0],i=c[1],l=Object(n.useState)([]),u=Object(ce.a)(l,2),m=u[0],d=u[1],p=r.a.useState(0),h=Object(ce.a)(p,2),f=h[0],g=h[1];Object(n.useEffect)((function(){if(a.todos){var e=0,t=0,n=Object.keys(a.todos).map((function(n){var r=a.todos[n];return e++,t+=r.isComplete?1:0,Object(U.a)({id:n},r)}));d(n);var r=(t/e*100).toFixed(0);g(r)}else d([])}),[a.todos]);var v=function(){var e=Object(x.a)(w.a.mark((function e(n){return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.preventDefault(),o){e.next=3;break}return e.abrupt("return");case 3:return e.prev=3,e.next=6,V(t,a.id,{text:o,isComplete:!1});case 6:i(""),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(3),console.log("An error occurred when creating task todo");case 12:case"end":return e.stop()}}),e,null,[[3,9]])})));return function(t){return e.apply(this,arguments)}}(),b=function(){var e=Object(x.a)(w.a.mark((function e(n){return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,q(t,a.id,n,!a.todos[n].isComplete);case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),console.log("An error occurred when trying to update todo status",e.t0);case 8:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(t){return e.apply(this,arguments)}}(),E=function(){var e=Object(x.a)(w.a.mark((function e(n){return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,H(t,a.id,n);case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),console.log("An error occurred when removing todo",e.t0);case 8:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement("div",{className:"task-todos-lockup"},r.a.createElement("div",{className:"title-lockup"},r.a.createElement(ee.a,{variant:"h5",component:"h2"},"Task Items")),r.a.createElement("div",{className:"task-grid-lockup"},r.a.createElement("div",{className:"todo-list-lockup"},m.length>0?r.a.createElement("ul",null,m.map((function(e,t){return r.a.createElement("li",{key:t},r.a.createElement("div",{className:"todo-lockup"},r.a.createElement(Ie.a,{onChange:function(){return b(e.id)},checked:e.isComplete,inputProps:{"aria-label":"primary checkbox"}}),r.a.createElement(ee.a,null,e.text),r.a.createElement("div",{className:"button-lockup"},r.a.createElement(fe.a,{onClick:function(){return E(e.id)}},r.a.createElement(G.a,{icon:se.f,size:"2x"})))))}))):r.a.createElement(ee.a,null,"No progress items have been set for this task")),r.a.createElement("div",{className:"todo-progress-lockup"},m.length>0&&r.a.createElement(ee.a,{variant:"h5"},f,"% Completed"))),r.a.createElement("div",{className:"create-todo-lockup"},r.a.createElement("form",{onSubmit:v},r.a.createElement("input",{onChange:function(e){i(e.target.value)},value:o,placeholder:"Enter progress item name..."}),r.a.createElement("button",{type:"submit"},"Save"))))}),tt=(a(142),function(e){var t=e.columnId,a=e.taskDetails,n=e.close,s=function(){var e=Object(x.a)(w.a.mark((function e(){return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,F(t,a.id);case 3:console.log("Delete pressed"+t+" "+a.id),n(),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),alert("An error occurred when deleting column ".concat(e.t0.message));case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}();return r.a.createElement("div",{className:"task-delete"},r.a.createElement("div",{className:"button-lockup"},r.a.createElement(fe.a,{onClick:function(){return s()}},"Delete")))}),at=function(e){var t=e.columnId,a=e.taskDetails,n=e.close,s=r.a.useState(""),c=Object(ce.a)(s,2),o=c[0],i=c[1],l=r.a.useState(!1),u=Object(ce.a)(l,2),m=u[0],d=u[1],p=function(){var e=Object(x.a)(w.a.mark((function e(){return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a.name!==o){e.next=3;break}return h(),e.abrupt("return");case 3:return e.prev=3,e.next=6,Q(t,a.id,{name:o});case 6:h(),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(3),console.log("err is ",e.t0);case 12:case"end":return e.stop()}}),e,null,[[3,9]])})));return function(){return e.apply(this,arguments)}}(),h=function(){i(""),d(!1)};return r.a.createElement("div",{className:"task-details-lockup"},r.a.createElement("div",{className:"header"},m?r.a.createElement("input",{onChange:function(e){i(e.target.value)},onBlur:p,onKeyPress:function(e){if("Enter"===e.key)return p()},value:o,placeholder:"Enter a title for this card..."}):r.a.createElement(ee.a,{variant:"h4",component:"h1",onClick:function(){i(a.name),d(!0)}},a.name),r.a.createElement(fe.a,{onClick:n},r.a.createElement(G.a,{icon:se.f,size:"1x"}))),r.a.createElement("div",{className:"grid-lockup"},r.a.createElement("div",{className:"main-col"},r.a.createElement(Qe,{columnId:t,taskDetails:a}),r.a.createElement(et,{columnId:t,taskDetails:a}),r.a.createElement(Ze,{columnId:t,taskDetails:a})),r.a.createElement("div",{className:"sidebar"},r.a.createElement(tt,{columnId:t,taskDetails:a,close:n}))))},nt=(a(143),function(e){var t=e.closeModal,a=e.children;return Object(n.useEffect)((function(){var e=function(e){"Escape"===e.key&&t()};return window.addEventListener("keydown",e),function(){return window.removeEventListener("keydown",e)}}),[t]),r.a.createElement("div",null,r.a.createElement("div",{className:"modalOverlay"}),r.a.createElement("div",{className:"modalContent"},a))}),rt=function(e){var t=e.boardId,a=e.column,s=e.user,c=r.a.useState(new Map),o=Object(ce.a)(c,2),i=o[0],l=o[1],u=r.a.useState(""),m=Object(ce.a)(u,2),d=m[0],p=m[1],h=r.a.useState(""),f=Object(ce.a)(h,2),g=f[0],b=f[1];Object(n.useEffect)((function(){try{v.ref("tasks/".concat(a.id)).on("value",(function(e){var t=new Map;e.forEach((function(e){var a=e.val();a.deletedTimestamp||t.set(e.key,Object(U.a)({id:e.key},a))})),l(t)}))}catch(e){alert("An error occurred when reading data... ".concat(e.message))}return function(){return v.ref("tasks/".concat(a.id)).off("value")}}),[a.id]);var E=function(){var e=Object(x.a)(w.a.mark((function e(){return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,L(t,a.id);case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),alert("An error occurred when deleting column ".concat(e.t0.message));case 8:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(){return e.apply(this,arguments)}}(),k=function(){var e=Object(x.a)(w.a.mark((function e(t){var n;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),d){e.next=3;break}return e.abrupt("return");case 3:return n={name:d,description:"",createdTimeStamp:Date.now(),createdBy:s.uid,deletedTimestamp:null},e.prev=4,e.next=7,W(a.id,n);case 7:p(""),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(4),alert("An error occurred when deleting column ".concat(e.t0.message));case 13:case"end":return e.stop()}}),e,null,[[4,10]])})));return function(t){return e.apply(this,arguments)}}(),y=function(){var e=Object(x.a)(w.a.mark((function e(t,a,n){return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,K(t,a,n);case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),alert("An error occurred when deleting column ".concat(e.t0.message));case 8:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(t,a,n){return e.apply(this,arguments)}}(),C=function(){b("")};return r.a.createElement("div",{className:"task-column-container"},r.a.createElement("div",{className:"task-column-lockup"},r.a.createElement("div",{className:"header-lockup"},r.a.createElement(ee.a,{variant:"h5",component:"h2"},a.name),r.a.createElement(G.a,{onClick:E,icon:se.f,size:"1x"})),r.a.createElement("div",{id:a.id,className:"task-list drop-zone",onDrop:function(e){return function(e){e.preventDefault();var t=e.dataTransfer.getData("text/plain"),a=document.getElementById(t),n=document.getElementById(e.target.id);if(n&&a){var r=a.closest("div").id,s=n.closest("div").id;r!==s&&y(s,r,t)}}(e)},onDragStart:function(e){return function(e){e.dataTransfer.setData("text/plain",e.target.id)}(e)},onDragOver:function(e){return function(e){e.preventDefault()}(e)}},r.a.createElement("ul",null,Array.from(i.values()).map((function(e){return r.a.createElement("li",{key:e.id,id:e.id,draggable:"true",onClick:function(t){return b(e.id)}},r.a.createElement(Ke.a,{variant:"outlined"},r.a.createElement(Je.a,{className:"dropzone",id:e.id},r.a.createElement(ee.a,{color:"textPrimary",gutterBottom:!0},e.name))))})),r.a.createElement("li",{className:"new-task-lockup"},r.a.createElement("div",null,r.a.createElement("form",{onSubmit:k},r.a.createElement("input",{onChange:function(e){p(e.target.value)},value:d,placeholder:"Enter a title for this card..."}),r.a.createElement(fe.a,{type:"submit"},"Add Task"))))))),!!g&&i.get(g)&&r.a.createElement(nt,{closeModal:C},r.a.createElement(at,{columnId:a.id,taskDetails:i.get(g),close:C})))},st=(a(144),function(e){var t=e.boardId,a=r.a.useState(!1),n=Object(ce.a)(a,2),s=n[0],c=n[1],o=r.a.useState(""),i=Object(ce.a)(o,2),l=i[0],u=i[1],m=function(){c(!1),u("")},d=function(){var e=Object(x.a)(w.a.mark((function e(a){return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a.preventDefault(),""!==l){e.next=3;break}return e.abrupt("return");case 3:return e.prev=3,e.next=6,z(t,l);case 6:m(),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(3),alert("An error occurred when creating a new column ".concat(e.t0.message));case 12:case"end":return e.stop()}}),e,null,[[3,9]])})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement("div",{id:"new-task-column-container"},r.a.createElement("form",{onSubmit:d},s?r.a.createElement("div",{id:"add-column-selected"},r.a.createElement("input",{onChange:function(e){u(e.target.value)},value:l,placeholder:"Enter list name..."}),r.a.createElement("div",{id:"button-lockup"},r.a.createElement(fe.a,{type:"submit"},"Add List"),r.a.createElement(fe.a,{onClick:m},r.a.createElement(G.a,{icon:se.f,size:"2x"})))):r.a.createElement("div",{id:"add-column"},r.a.createElement("button",{onClick:function(){c(!s)}},r.a.createElement(G.a,{icon:se.d,size:"1x"}),r.a.createElement(ee.a,{component:"p"},"Add another list")))))}),ct=(a(145),function(e){var t=e.groupId,a=e.taskboard,s=r.a.useState(!1),c=Object(ce.a)(s,2),o=c[0],i=c[1],l=r.a.useState(""),u=Object(ce.a)(l,2),m=u[0],d=u[1],p=r.a.useState(""),h=Object(ce.a)(p,2),f=h[0],g=h[1];Object(n.useEffect)((function(){g(a.name)}),[a.name]);var v=function(){var e=Object(x.a)(w.a.mark((function e(n){return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.preventDefault(),a.id&&m){e.next=3;break}return e.abrupt("return");case 3:return e.prev=3,e.next=6,R(t,a.id,{name:m});case 6:g(m),b(),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(3),console.log("An error occurred when saving new title",e.t0);case 13:case"end":return e.stop()}}),e,null,[[3,10]])})));return function(t){return e.apply(this,arguments)}}(),b=function(){i(!1)};return r.a.createElement("div",{className:"taskboard-navbar-lockup"},o?r.a.createElement("form",{onSubmit:v},r.a.createElement("input",{onChange:function(e){d(e.target.value)},value:m}),r.a.createElement("div",{className:"button-lockup"},r.a.createElement(fe.a,{type:"submit"},r.a.createElement(G.a,{icon:se.a,size:"1x"})),r.a.createElement(fe.a,{onClick:b},r.a.createElement(G.a,{icon:se.g,size:"1x"})))):r.a.createElement(r.a.Fragment,null,r.a.createElement(ee.a,{variant:"h5"},f),r.a.createElement("div",{className:"button-lockup"},r.a.createElement(fe.a,{onClick:function(){d(f),i(!0)}},r.a.createElement(G.a,{icon:se.b,size:"1x"})))))}),ot=function(e){return 0===Object.keys(e).length},it=function(){var e=r.a.useState({}),t=Object(ce.a)(e,2),a=t[0],s=t[1],c=r.a.useState(!1),o=Object(ce.a)(c,2),i=o[0],l=o[1],u=r.a.useState([]),m=Object(ce.a)(u,2),d=m[0],h=m[1],f=r.a.useState(!1),b=Object(ce.a)(f,2),E=b[0],k=b[1],y=r.a.useState(null),C=Object(ce.a)(y,2),S=C[0],O=C[1],N=localStorage.getItem("groupId");return Object(n.useEffect)((function(){var e,t=(e="id",new URLSearchParams(window.location.hash.split("?")[1]).get(e));(function(){var e=Object(x.a)(w.a.mark((function e(){var a;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,v.ref("/taskboards/".concat(N,"/").concat(t)).once("value");case 3:if((a=e.sent).val()){e.next=6;break}throw new Error("Taskboard does not exist");case 6:s(Object(U.a)({id:a.key},a.val())),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(0),console.log("An error occurred when getting taskboard data",e.t0),s({});case 13:l(!0);case 14:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}})()()}),[N]),Object(n.useEffect)((function(){if(!ot(a)){O(g().currentUser);try{v.ref("columns/".concat(a.id)).on("value",(function(e){var t=[];e.forEach((function(e){var a=e.val();a.deletedTimestamp||t.push(Object(U.a)({id:e.key},a))})),h(t),k(!1)}))}catch(e){k(!0),console.error("An error occurred when reading data... ".concat(e.message))}return function(){return v.ref("columns/".concat(a.id)).off("value")}}}),[a]),console.log("Readerror is ",E),i&&ot(a)?r.a.createElement("div",{className:"taskboard-error-lockup"},r.a.createElement(ee.a,{variant:"h5"},"Taskboard does not exist"),r.a.createElement(p.b,{to:"chat"},"Go back to Home Page")):r.a.createElement("div",{id:"taskboard-container"},r.a.createElement(ct,{groupId:N,taskboard:a}),r.a.createElement("div",{className:"taskboard-canvas"},i?r.a.createElement("div",{className:"taskboard"},d.map((function(e){return r.a.createElement(rt,{key:e.id,boardId:a.id,column:e,user:S,onDragOver:function(e){return e.preventDefault()}})})),r.a.createElement(st,{boardId:a.id})):r.a.createElement("div",{className:"loading-lockup"},r.a.createElement("div",{className:"spinner-border text-success",role:"status"},r.a.createElement("span",{className:"sr-only"},"Loading...")))))},lt=(a(146),a(101)),ut=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(i.a)(a,[{key:"render",value:function(){var e=this.props.text||"";return r.a.createElement("div",null,e)}}]),a}(n.Component),mt=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).handleimageChange=function(e){if(e.target.files[0]){var t=e.target.files[0];n.setState((function(){return{image:t}}))}},n.handlePhotoChange=function(){var e=n.state.image;b.ref("ProfilePhoto/"+n.state.user.uid).put(e).on("state_changed",(function(e){var t=Math.round(e.bytesTransferred/e.totalBytes*100);n.setState({progress:t})}),(function(e){console.log(e)}),Object(x.a)(w.a.mark((function e(){return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b.ref("ProfilePhoto").child(n.state.user.uid).getDownloadURL().then((function(e){n.setState({url:e,error:"The profile image was uploaded successfully."})}));case 2:return e.next=4,v.ref("users/".concat(n.state.user.uid)).update({profilePic:n.state.url});case 4:case"end":return e.stop()}}),e)}))))},n.state={user:g().currentUser,email:null,username:null,photoUrl:null,readError:null,writeError:null,image:null,progress:0,usernameEditable:!1,emailEditable:!1,passwordEditable:!1,photoEditable:!1,error:null},n.handleUsernameChange=n.handleUsernameChange.bind(Object(P.a)(n)),n.handleUsernameCancel=n.handleUsernameCancel.bind(Object(P.a)(n)),n.handleEmailChange=n.handleEmailChange.bind(Object(P.a)(n)),n.handleEmailCancel=n.handleEmailCancel.bind(Object(P.a)(n)),n.handlePasswordChange=n.handlePasswordChange.bind(Object(P.a)(n)),n.handlePasswordCancel=n.handlePasswordCancel.bind(Object(P.a)(n)),n.handlePhotoChange=n.handlePhotoChange.bind(Object(P.a)(n)),n.handleChange=n.handleChange.bind(Object(P.a)(n)),n.handleimageChange=n.handleimageChange.bind(Object(P.a)(n)),n.handlePhotoStateChange=n.handlePhotoStateChange.bind(Object(P.a)(n)),n}return Object(i.a)(a,[{key:"writeUserData",value:function(){var e=Object(x.a)(w.a.mark((function e(t,a,n){return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,v.ref("users/"+t).update({email:n,name:a});case 3:return this.refreshUserDetails(),e.abrupt("return",!0);case 7:return e.prev=7,e.t0=e.catch(0),this.refreshUserDetails(),e.abrupt("return",!1);case 11:case"end":return e.stop()}}),e,this,[[0,7]])})));return function(t,a,n){return e.apply(this,arguments)}}()},{key:"handleUsernameCancel",value:function(e){e.preventDefault(),this.setState({usernameTemp:"",usernameEditable:!this.state.usernameEditable})}},{key:"handleUsernameChange",value:function(){var e=Object(x.a)(w.a.mark((function e(t){return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),!this.state.usernameEditable){e.next=22;break}if("undefined"===typeof this.state.usernameTemp||""===this.state.usernameTemp){e.next=21;break}return e.prev=3,e.next=6,this.writeUserData(this.state.user.uid,this.state.usernameTemp,this.state.email);case 6:if(!e.sent){e.next=11;break}this.setState({error:"Successfully changed Username"}),e.next=12;break;case 11:throw new Error("Could not set Username, try again later.");case 12:e.next=18;break;case 14:e.prev=14,e.t0=e.catch(3),console.log(e.t0),this.setState({error:e.t0});case 18:this.setState({usernameTemp:""}),e.next=22;break;case 21:this.setState({error:"Username cannot be empty."});case 22:this.setState({usernameEditable:!this.state.usernameEditable});case 23:case"end":return e.stop()}}),e,this,[[3,14]])})));return function(t){return e.apply(this,arguments)}}()},{key:"handleEmailCancel",value:function(e){e.preventDefault(),this.setState({emailTemp:"",emailEditable:!this.state.emailEditable})}},{key:"handleEmailChange",value:function(){var e=Object(x.a)(w.a.mark((function e(t){return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),!this.state.emailEditable){e.next=18;break}if("undefined"===typeof this.state.emailTemp||""===this.state.emailTemp){e.next=17;break}return e.prev=3,e.next=6,this.state.user.updateEmail(this.state.emailTemp);case 6:this.writeUserData(this.state.user.uid,this.state.username,this.state.emailTemp),this.setState({error:"Successfully changed Email."}),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(3),this.setState({error:e.t0.message+" Email was not changed."}),console.log(e.t0);case 14:this.setState({emailTemp:""}),e.next=18;break;case 17:this.setState({error:"Email cannot be empty."});case 18:this.setState({emailEditable:!this.state.emailEditable});case 19:case"end":return e.stop()}}),e,this,[[3,10]])})));return function(t){return e.apply(this,arguments)}}()},{key:"handlePasswordCancel",value:function(e){e.preventDefault(),this.setState({passwordEditable:!this.state.passwordEditable})}},{key:"handlePasswordChange",value:function(){var e=Object(x.a)(w.a.mark((function e(t){var a;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),!this.state.passwordEditable){e.next=23;break}if("undefined"===typeof this.state.passwordTemp||""===this.state.passwordTemp){e.next=21;break}if(this.state.passwordTemp!==this.state.confirmPassTemp){e.next=17;break}return e.prev=4,e.next=7,this.state.user.updatePassword(this.state.passwordTemp);case 7:this.setState({error:"Successfully changed Password."}),e.next=15;break;case 10:e.prev=10,e.t0=e.catch(4),console.log(e.t0),a=e.t0.message+". Password was not changed.",this.setState({error:a});case 15:e.next=19;break;case 17:this.setState({error:"Password and Confirmation fields aren't equal."}),console.log("Both fields aren't equal.");case 19:e.next=23;break;case 21:this.setState({error:"Password cannot be empty"}),console.log("Password cannot be empty");case 23:this.setState({passwordTemp:"",passwordEditable:!this.state.passwordEditable});case 24:case"end":return e.stop()}}),e,this,[[4,10]])})));return function(t){return e.apply(this,arguments)}}()},{key:"handleChange",value:function(e,t){var a=e.target.value;this.setState((function(){return Object(D.a)({},t,a)}))}},{key:"handlePhotoStateChange",value:function(e){e.preventDefault(),this.setState({photoEditable:!this.state.photoEditable})}},{key:"refreshUserDetails",value:function(){var e=this;this.setState({readError:null});try{v.ref("users/".concat(this.state.user.uid)).once("value",(function(t){e.setState({email:t.val().email,username:t.val().name?t.val().name:null})})),b.ref("ProfilePhoto").child(this.state.user.uid).getDownloadURL().then((function(t){console.log(t),e.setState({url:t})}))}catch(t){this.setState({readError:t.message})}}},{key:"componentDidMount",value:function(){this.refreshUserDetails()}},{key:"render",value:function(){var e,t,a,n,s,c,o,i,l,u=this;return n=r.a.createElement(G.a,{icon:lt.faTimes,"aria-hidden":"true"}),s=r.a.createElement(ut,{text:this.state.error}),c="CONFIRM PASSWORD",e=this.state.usernameEditable?r.a.createElement("div",null,r.a.createElement(T.a,{style:{fontSize:16,height:35,borderColor:"gray",borderWidth:1,width:"95%"},defaultValue:this.state.username,onChange:function(e){return u.handleChange(e,"usernameTemp")}})):r.a.createElement("div",null,r.a.createElement(ut,{text:this.state.username})),t=this.state.emailEditable?r.a.createElement("div",null,r.a.createElement(T.a,{style:{fontSize:16,height:35,borderColor:"gray",borderWidth:1,width:"95%"},defaultValue:this.state.email,onChange:function(e){return u.handleChange(e,"emailTemp")}})):r.a.createElement("div",null,r.a.createElement(ut,{text:this.state.email})),this.state.passwordEditable?(a=r.a.createElement("div",null,r.a.createElement(T.a,{style:{fontSize:16,height:35,borderColor:"gray",borderWidth:1,marginBottom:5,marginTop:5,width:"95%"},type:"password",onChange:function(e){return u.handleChange(e,"passwordTemp")}})),o=r.a.createElement("div",null,r.a.createElement(T.a,{style:{fontSize:16,height:35,borderColor:"gray",borderWidth:1,marginBottom:5,marginTop:5,width:"95%"},type:"password",onChange:function(e){return u.handleChange(e,"confirmPassTemp")}})),c=r.a.createElement("h3",null,"PASSWORD ",r.a.createElement("br",null),"CONFIRM PASSWORD")):(a=r.a.createElement("div",null,r.a.createElement(ut,{style:{marginBottom:5,marginTop:5},text:"************"})),o="",c=r.a.createElement("h3",null,"PASSWORD")),l=this.state.photoEditable?r.a.createElement("div",null,r.a.createElement("progress",{value:this.state.progress,max:"100"}),r.a.createElement("br",null),r.a.createElement("input",{type:"file",onChange:this.handleimageChange}),r.a.createElement("button",{onClick:this.handlePhotoChange},"Upload"),r.a.createElement("br",null)):r.a.createElement("div",{className:"content"},r.a.createElement("h4",null,"Add a photo to personalise your account")),i=null!=this.state.url?r.a.createElement("img",{className:"photo-icon",src:this.state.url,alt:"Uploaded images"}):r.a.createElement("div",{className:"name-icon"},null!=this.state.username?this.state.username.charAt(0):""),r.a.createElement("div",{id:"profile"},r.a.createElement("div",{className:"content-wrap"},i,r.a.createElement("h1",null,"Welcome,"," ",null!=this.state.username?this.state.username:this.state.email),r.a.createElement("h2",null,"Manage your information to make Chat App work better for you"),r.a.createElement("div",{className:"card"},r.a.createElement("div",{className:"inner-heading"},"Profile"),r.a.createElement("div",{className:"info"},r.a.createElement("h3",null,"PHOTO"),r.a.createElement("div",{className:"content"},l),r.a.createElement("div",{className:"icon",onClick:this.handlePhotoStateChange},i,r.a.createElement("div",{className:"photo"},r.a.createElement("svg",{"data-v-d223ba98":"","aria-hidden":"true",focusable:"false","data-prefix":"fas","data-icon":"camera",role:"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512",className:"svg-inline--fa fa-camera fa-w-16",style:{fontSize:"17px"}},r.a.createElement("path",{"data-v-d223ba98":"",fill:"currentColor",d:"M512 144v288c0 26.5-21.5 48-48 48H48c-26.5 0-48-21.5-48-48V144c0-26.5 21.5-48 48-48h88l12.3-32.9c7-18.7 24.9-31.1 44.9-31.1h125.5c20 0 37.9 12.4 44.9 31.1L376 96h88c26.5 0 48 21.5 48 48zM376 288c0-66.2-53.8-120-120-120s-120 53.8-120 120 53.8 120 120 120 120-53.8 120-120zm-32 0c0 48.5-39.5 88-88 88s-88-39.5-88-88 39.5-88 88-88 88 39.5 88 88z",className:""}))))),r.a.createElement("div",{className:"info"},r.a.createElement("h3",null,"EMAIL"),r.a.createElement("div",{className:"content"},t),r.a.createElement("div",{onClick:this.handleEmailCancel},r.a.createElement("b",null,this.state.emailEditable?n:"")),r.a.createElement("div",{className:"popup",onClick:this.handleEmailChange},r.a.createElement("svg",{"data-v-d223ba98":"","aria-hidden":"true",focusable:"false","data-prefix":"fas","data-icon":"close",role:"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512",className:"svg-inline--fa fa-close fa-w-16"},r.a.createElement("path",{"data-v-d223ba98":"",fill:"currentColor",d:"M290.74 93.24l128.02 128.02-277.99 277.99-114.14 12.6C11.35 513.54-1.56 500.62.14 485.34l12.7-114.22 277.9-277.88zm207.2-19.06l-60.11-60.11c-18.75-18.75-49.16-18.75-67.91 0l-56.55 56.55 128.02 128.02 56.55-56.55c18.75-18.76 18.75-49.16 0-67.91z",className:""})))),r.a.createElement("div",{className:"info"},r.a.createElement("h3",null,"USERNAME"),r.a.createElement("div",{className:"content"},e),r.a.createElement("div",{onClick:this.handleUsernameCancel},r.a.createElement("b",null,this.state.usernameEditable?n:"")),r.a.createElement("div",{className:"popup",onClick:this.handleUsernameChange},r.a.createElement("svg",{"data-v-d223ba98":"","aria-hidden":"true",focusable:"false","data-prefix":"fas","data-icon":"pen",role:"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512",className:"svg-inline--fa fa-pen fa-w-16"},r.a.createElement("path",{"data-v-d223ba98":"",fill:"currentColor",d:"M290.74 93.24l128.02 128.02-277.99 277.99-114.14 12.6C11.35 513.54-1.56 500.62.14 485.34l12.7-114.22 277.9-277.88zm207.2-19.06l-60.11-60.11c-18.75-18.75-49.16-18.75-67.91 0l-56.55 56.55 128.02 128.02 56.55-56.55c18.75-18.76 18.75-49.16 0-67.91z",className:""})))),r.a.createElement("div",{className:"info",style:{borderBottom:"none"}},c,r.a.createElement("div",{className:"content"},r.a.createElement("div",{className:"content",type:"password"},a,o)),r.a.createElement("div",{onClick:this.handlePasswordCancel},r.a.createElement("b",null,this.state.passwordEditable?n:"")),r.a.createElement("div",{className:"popup",onClick:this.handlePasswordChange},r.a.createElement("svg",{"data-v-d223ba98":"","aria-hidden":"true",focusable:"false","data-prefix":"fas","data-icon":"pen",role:"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512",className:"svg-inline--fa fa-pen fa-w-16"},r.a.createElement("path",{"data-v-d223ba98":"",fill:"currentColor",d:"M290.74 93.24l128.02 128.02-277.99 277.99-114.14 12.6C11.35 513.54-1.56 500.62.14 485.34l12.7-114.22 277.9-277.88zm207.2-19.06l-60.11-60.11c-18.75-18.75-49.16-18.75-67.91 0l-56.55 56.55 128.02 128.02 56.55-56.55c18.75-18.76 18.75-49.16 0-67.91z",className:""}))))),r.a.createElement("div",null,s)))}}]),a}(n.Component);a(147);function dt(e){var t=e.component,a=e.authenticated,n=Object(m.a)(e,["component","authenticated"]);return r.a.createElement(d.b,Object.assign({},n,{render:function(e){return!1===a?r.a.createElement(t,e):r.a.createElement(d.a,{to:"/chat"})}}))}function pt(e){var t=e.component,a=e.authenticated,n=Object(m.a)(e,["component","authenticated"]);return r.a.createElement(d.b,Object.assign({},n,{render:function(e){return!0===a?r.a.createElement(t,e):r.a.createElement(d.a,{to:{pathname:"/login",state:{from:e.location}}})}}))}var ht=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){var e;return Object(o.a)(this,a),(e=t.call(this)).state={authenticated:!1,loading:!0},e}return Object(i.a)(a,[{key:"componentDidMount",value:function(){var e=this;g().onAuthStateChanged((function(t){t?e.setState({authenticated:!0,loading:!1}):e.setState({authenticated:!1,loading:!1})}))}},{key:"render",value:function(){return!0===this.state.loading?r.a.createElement("div",{className:"spinner-border text-success",role:"status",style:{position:"absolute",left:"50%",top:"50%"}},r.a.createElement("span",{className:"sr-only"},"Loading...")):r.a.createElement("div",{className:"App"},r.a.createElement(p.a,{basename:"/"},r.a.createElement(I,{authenticated:this.state.authenticated}),r.a.createElement(d.d,null,r.a.createElement(pt,{path:"/chat",authenticated:this.state.authenticated,component:He}),r.a.createElement(dt,{path:"/login",authenticated:this.state.authenticated,component:_}),r.a.createElement(pt,{path:"/profile",authenticated:this.state.authenticated,component:mt}),r.a.createElement(pt,{path:"/taskboard",authenticated:this.state.authenticated,component:it}))))}}]),a}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(ht,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},92:function(e,t,a){e.exports=a.p+"static/media/icon.b5d56f8d.png"}},[[110,1,2]]]);
//# sourceMappingURL=main.91460db8.chunk.js.map